'use client';import RequireApproved from '@/components/RequireApproved';import { collection, doc, getDocs, query, updateDoc, where } from 'firebase/firestore';import { db } from '@/firebase/client';import { useEffect, useState } from 'react';export default function AdminPage(){const [pendingUsers,setPendingUsers]=useState<any[]>([]);useEffect(()=>{(async()=>{const qs=query(collection(db,'Users'),where('status','==','Pending'));const u=await getDocs(qs);setPendingUsers(u.docs.map(d=>({id:d.id,...(d.data() as any)})));})();},[]);const approve=(id:string)=>updateDoc(doc(db,'Users',id),{status:'Approved'});const reject=(id:string)=>updateDoc(doc(db,'Users',id),{status:'Rejected'});return (<RequireApproved role='admin'><h1>لوحة المسؤول</h1><div>{pendingUsers.map(u=>(<div key={u.id}><span>{u.phone}</span><button onClick={()=>approve(u.id)}>اعتماد</button><button onClick={()=>reject(u.id)}>رفض</button></div>))}</div></RequireApproved>);}
